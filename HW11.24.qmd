---
title: "Class notes 11.24"
format: html
embed-resources: true
---

```{r}
#| label: setup
#| message: false

library(tidyverse)
```

## Regression with a categorical explainer

Let's look at non-adelie penguins.

```{r}
penguins_sm <- penguins %>% 
  filter(species != "Adelie")

ggplot(penguins_sm, aes(x = bill_dep,
                        y = bill_len,
                        color = species)) +
  geom_point() + 
  geom_smooth(method = "lm",
              se = FALSE) +
  scale_color_brewer(palette = "Dark2")
```

[about 10 minutes on the board about the math]

Let's actually get the model coefficients.

```{r}
model <- lm(bill_len ~ bill_dep + species,
            data = penguins_sm)
```

The form of this model is $bill_len = \beta_0 + \beta_1 (billdep) + \beta_2 (isgentoo?)$

```{r}
model # just coefficients
summary(model)
```

We can get a residual plot for this model, too. 

```{r}
library(broom)

penguins_aug <- augment(model)
glimpse(penguins_aug)

ggplot(penguins_aug, aes(x = .fitted,
                         y = .resid)) +
  geom_point()
```

Looks great!

## Categorical explainers with multiple levels

What if we also want to consider Adelies?

```{r}
model_full <- lm(bill_len ~ bill_dep + species,
                 data = penguins)
model_full
```

Let's conclude with a plot for this, too.

```{r}
ggplot(penguins, aes(x = bill_dep,
                     y = bill_len,
                     color = species)) +
  geom_point() +
  geom_smooth(method = "lm",
              se = FALSE) +
  scale_color_brewer(palette = "Dark2")
```

We should consider whether adelies need a different slope. For that matter, should we allow different slopes for the other species?










